Supported options
=================

The recipe supports the following options:

``project-name`` (required)

  Default value: ``My project``.

``project-description``

  Description of the project. This description will also be used as the
  alternative text to the header logo.

``project-url``

  This URL will be used as the link on the header logo. Default value:
  ``http://example.com``.

``repos-type`` (required)

  Supported values: ``svn`` for Subversion, ``hg`` for Mercurial.

``repos-path`` (required)

  Location, on the local file system, of your code repository.

``remove-examples``

  If set to ``False``, this will not remove the default milestones and
  components added by Trac when creating a brand new instance. Default value:
  ``True``.

``buildbot-url``

  Add a `buildbot` item in the Trac toolbar pointing to the URL provided.

``header-logo``

  Location of the logo that will replace the default Trac logo at the top of
  each page. The file will be copied by the recipe to the ``htdocs`` directory
  of your Trac instance.

``footer-message``

  The bottom right-aligned text displayed on each page displayed by Trac. HTML
  can be used here. Default value ``This Trac instance was generated by
  <a href="http://pypi.python.org/pypi/pbp.recipe.trac">pbp.recipe.trac</a>.``.

``smtp-always-bcc``

  Email address(es) to always send notifications to, addresses do not appear
  publicly (Bcc:).

``smtp-always-cc``

  Email address(es) to always send notifications to, addresses can be seen by
  all recipients (Cc:).

``smtp-default-domain``

  Default host/domain to append to address that do not specify one

``smtp-enabled``

  Enable SMTP (email) notification.

``smtp-from``

  Sender address to use in notification emails.

``smtp-from-name``

  Sender name to use in notification emails.

``smtp-password``

  Password for SMTP server.

``smtp-port``

  SMTP server port to use for email notification.

``smtp-replyto``

  Reply-To address to use in notification emails.

``smtp-server``

  SMTP server hostname to use for email notifications.

``smtp-subject-prefix``

  Text to prepend to subject line of notification emails. If the setting is not
  defined, then the value of ``project-name`` is used as prefix. If no prefix
  is desired,then specifying an empty option will disable it.

``smtp-user``

  Username for SMTP server.

``trac-ini-additional``

  In case a Trac parameter is not natively supported by this recipe, you can
  use this to add your own. The syntax must respect the following scheme:
  ``section|parameter|value``. You can add several custom parameters, one per
  line. Example::

    trac-ini-additional = attachment|max_size|52428800
                          notification|always_notify_owner|true
                          logging|log_level|DEBUG

  To know more about all the ``trac.ini`` parameters, see:
  http://trac.edgewall.org/wiki/0.11/TracIni


Example usage
=============

We'll start by creating a buildout that uses the recipe::

    >>> write('buildout.cfg',
    ... """
    ... [buildout]
    ... parts = trac
    ... index = http://pypi.python.org/simple
    ...
    ... [trac]
    ... recipe = pbp.recipe.trac
    ... project-name = My project
    ... project-url = http://example.com
    ... repos-type = hg
    ... repos-path = sqlite:${buildout:directory}/var/svn
    ... buildbot-url = http://buildbot.example.com
    ... header-logo = ${buildout:directory}/my_logo
    ... smtp-server = localhost
    ... smtp-port = 25
    ... smtp-from = tarek@ziade.org
    ... smtp-replyto = tarek@ziade.org
    ... """)

Let's run the buildout::

    >>> res = system(buildout)

This creates a trac instance::

    >>> ls(join(sample_buildout, 'parts', 'trac'))
    -  README
    -  VERSION
    d  attachments
    d  conf
    d  db
    d  htdocs
    d  log
    d  plugins
    d  templates

With a trac.ini file. Let's check its content::

    >>> f = join(sample_buildout, 'parts', 'trac', 'conf', 'trac.ini')
    >>> from ConfigParser import ConfigParser
    >>> parser = ConfigParser()
    >>> null = parser.read([f])
    >>> parser.get('trac', 'repository_type')
    'hg'
    >>> parser.get('trac', 'repository_dir')
    '/sample-buildout/var/svn'
    >>> parser.get('project', 'descr')
    'My example project'
    >>> parser.get('project', 'name')
    'My project'
    >>> parser.get('project', 'url')
    ''
    >>> parser.get('components', 'tracext.hg.*')
    'enabled'

    >>> parser.get('navadd', 'buildbot.url')
    'http://buildbot.example.com'


Support
=======

- Documentation: http://pypi.python.org/pypi/pbp.recipe.trac

- Bug tracker: http://bitbucket.org/tarek/atomisator/issues

- Source: http://bitbucket.org/tarek/atomisator/src/tip/packages/pbp.recipe.trac/

- pbp.recipe.trac is a sub-project of atomistor: http://atomisator.ziade.org


